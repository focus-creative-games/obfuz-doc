"use strict";(self.webpackChunkobfuz=self.webpackChunkobfuz||[]).push([[518],{5260:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>t,contentTitle:()=>d,default:()=>u,frontMatter:()=>s,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"manual/hybridclr/work-with-hybridclr","title":"Working with HybridCLR","description":"HybridCLR workflow does not consider code obfuscation scenarios, so using it directly will encounter some issues.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/manual/hybridclr/work-with-hybridclr.md","sourceDirName":"manual/hybridclr","slug":"/manual/hybridclr/work-with-hybridclr","permalink":"/en/docs/manual/hybridclr/work-with-hybridclr","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/manual/hybridclr/work-with-hybridclr.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"HybridCLR","permalink":"/en/docs/manual/hybridclr"},"next":{"title":"Polymorphic DLL Files","permalink":"/en/docs/manual/hybridclr/polymorphic-dll"}}');var r=n(4848),o=n(8453);const s={},d="Working with HybridCLR",t={},c=[{value:"Issues Encountered",id:"issues-encountered",level:2},{value:"Plugin Conflicts Between Obfuz and HybridCLR dnlib Plugins",id:"plugin-conflicts-between-obfuz-and-hybridclr-dnlib-plugins",level:3},{value:"Trimming Issues for Obfuscated AOT Assemblies",id:"trimming-issues-for-obfuscated-aot-assemblies",level:3},{value:"How to Obfuscate Hot Update DLLs",id:"how-to-obfuscate-hot-update-dlls",level:3},{value:"Solutions",id:"solutions",level:2},{value:"Replace <code>HybridCLR/Generate/All</code>",id:"replace-hybridclrgenerateall",level:2},{value:"Replace <code>HybridCLR/CompileDll/XXXX</code>",id:"replace-hybridclrcompiledllxxxx",level:2},{value:"Using Polymorphic DLLs",id:"using-polymorphic-dlls",level:2}];function a(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"working-with-hybridclr",children:"Working with HybridCLR"})}),"\n",(0,r.jsx)(i.p,{children:"HybridCLR workflow does not consider code obfuscation scenarios, so using it directly will encounter some issues."}),"\n",(0,r.jsx)(i.h2,{id:"issues-encountered",children:"Issues Encountered"}),"\n",(0,r.jsx)(i.h3,{id:"plugin-conflicts-between-obfuz-and-hybridclr-dnlib-plugins",children:"Plugin Conflicts Between Obfuz and HybridCLR dnlib Plugins"}),"\n",(0,r.jsx)(i.p,{children:"Both Obfuz and HybridCLR plugins include the dnlib plugin. For Unity, errors occur when two packages contain plugins with the same name.\nThe solution is to download HybridCLR locally, remove the included dnlib.dll, and then place it in the Packages directory."}),"\n",(0,r.jsx)(i.h3,{id:"trimming-issues-for-obfuscated-aot-assemblies",children:"Trimming Issues for Obfuscated AOT Assemblies"}),"\n",(0,r.jsxs)(i.p,{children:["HybridCLR's default ",(0,r.jsx)(i.code,{children:"HybridCLR/Generate/All"})," command generates link.xml based on unobfuscated assemblies. If some AOT assemblies are obfuscated, the types and functions preserved in link.xml generated from unobfuscated code are all pre-obfuscation names,\nwhich causes link.xml to be unable to truly preserve those obfuscated AOT types and functions. After building, running hot update code may encounter situations where types and functions are trimmed."]}),"\n",(0,r.jsx)(i.h3,{id:"how-to-obfuscate-hot-update-dlls",children:"How to Obfuscate Hot Update DLLs"}),"\n",(0,r.jsxs)(i.p,{children:["Hot update dlls generated by ",(0,r.jsx)(i.code,{children:"HybridCLR/CompileDll/XXX"})," are not obfuscated and require additional obfuscation of hot update code."]}),"\n",(0,r.jsx)(i.h2,{id:"solutions",children:"Solutions"}),"\n",(0,r.jsx)(i.p,{children:"We provide the com.code-philosophy.obfuz4hybridclr extension package to solve hybridclr hot update workflow issues."}),"\n",(0,r.jsx)(i.p,{children:"URL installation addresses for Unity Package:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"https://github.com/focus-creative-games/obfuz4hybridclr.git"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"https://gitee.com/focus-creative-games/obfuz4hybridclr.git"})}),"\n"]}),"\n",(0,r.jsxs)(i.h2,{id:"replace-hybridclrgenerateall",children:["Replace ",(0,r.jsx)(i.code,{children:"HybridCLR/Generate/All"})]}),"\n",(0,r.jsxs)(i.p,{children:["obfuz4hybridclr provides a GenerateAll command suitable for obfuscation workflows. Please replace the ",(0,r.jsx)(i.code,{children:"HybridCLR/Generate/All"})," command with ",(0,r.jsx)(i.code,{children:"HybridCLR/ObfuzExtension/GenerateAll"})," in the build process."]}),"\n",(0,r.jsxs)(i.p,{children:["If calling ",(0,r.jsx)(i.code,{children:"HybridCLR.Editor.Commands.PrebuildCommand::GenerateAll()"})," in code, replace it with ",(0,r.jsx)(i.code,{children:"Obfuz4HybridCLR.PrebuildCommandExt.GenerateAll()"}),"."]}),"\n",(0,r.jsxs)(i.h2,{id:"replace-hybridclrcompiledllxxxx",children:["Replace ",(0,r.jsx)(i.code,{children:"HybridCLR/CompileDll/XXXX"})]}),"\n",(0,r.jsxs)(i.p,{children:["obfuz4hybridclr provides commands that simultaneously complete compilation and obfuscation of hot update code. Please replace ",(0,r.jsx)(i.code,{children:"HybridCLR/Generate/ActiveBuildTarget"})," with ",(0,r.jsx)(i.code,{children:"HybridCLR/Obfuz/Extension/CompileAndObfuscateDll"}),"."]}),"\n",(0,r.jsxs)(i.p,{children:["If calling ",(0,r.jsx)(i.code,{children:"HybridCLR.Editor.Commands.CompileDllCommand.CompileDll"})," in code, replace it with ",(0,r.jsx)(i.code,{children:"Obfuz4HybridCLR.PrebuildCommandExt.CompileAndObfuscateDll"}),"."]}),"\n",(0,r.jsx)(i.h2,{id:"using-polymorphic-dlls",children:"Using Polymorphic DLLs"}),"\n",(0,r.jsxs)(i.p,{children:["Polymorphic dlls are a brand new custom file structure that supports randomization and can effectively counter malicious cracking and tampering. For detailed documentation, see ",(0,r.jsx)(i.a,{href:"./polymorphic-dll",children:"Polymorphic DLL Files"}),"."]})]})}function u(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>s,x:()=>d});var l=n(6540);const r={},o=l.createContext(r);function s(e){const i=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),l.createElement(o.Provider,{value:i},e.children)}}}]);