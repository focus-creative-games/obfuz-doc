"use strict";(self.webpackChunkobfuz=self.webpackChunkobfuz||[]).push([[8270],{3686:(e,s,l)=>{l.r(s),l.d(s,{assets:()=>r,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"manual/impact-dll-size","title":"Impact on Assembly Size","description":"Since obfuscation modifies dll code, the assembly size will change after obfuscation. Generally speaking, except for Symbol Obfus which reduces assembly size, all other obfuscation passes will increase assembly size, but each pass has different impacts.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/manual/impact-dll-size.md","sourceDirName":"manual","slug":"/manual/impact-dll-size","permalink":"/en/docs/manual/impact-dll-size","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/manual/impact-dll-size.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Reflection","permalink":"/en/docs/manual/reflection"},"next":{"title":"HybridCLR","permalink":"/en/docs/manual/hybridclr"}}');var t=l(4848),i=l(8453);const a={},d="Impact on Assembly Size",r={},c=[{value:"Test Data",id:"test-data",level:2},{value:"Conclusion",id:"conclusion",level:2}];function o(e){const s={h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"impact-on-assembly-size",children:"Impact on Assembly Size"})}),"\n",(0,t.jsx)(s.p,{children:"Since obfuscation modifies dll code, the assembly size will change after obfuscation. Generally speaking, except for Symbol Obfus which reduces assembly size, all other obfuscation passes will increase assembly size, but each pass has different impacts."}),"\n",(0,t.jsx)(s.p,{children:"We measured the impact of each pass on final dll size on our internal test assembly Tests."}),"\n",(0,t.jsx)(s.h2,{id:"test-data",children:"Test Data"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Status"}),(0,t.jsx)(s.th,{children:"Final Size (KB)"}),(0,t.jsx)(s.th,{children:"Size Increase Percentage"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Original file"}),(0,t.jsx)(s.td,{children:"698"}),(0,t.jsx)(s.td,{children:"0%"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"All passes disabled"}),(0,t.jsx)(s.td,{children:"681"}),(0,t.jsx)(s.td,{children:"-2.4%"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Const Encryption enabled"}),(0,t.jsx)(s.td,{children:"941"}),(0,t.jsx)(s.td,{children:"34.8%"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Field Encryption enabled"}),(0,t.jsx)(s.td,{children:"683"}),(0,t.jsx)(s.td,{children:"-2.1%"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Symbol Obfus enabled"}),(0,t.jsx)(s.td,{children:"652"}),(0,t.jsx)(s.td,{children:"-6.6%"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Call Obfus enabled, Proxy Mode is Dispatch"}),(0,t.jsx)(s.td,{children:"794"}),(0,t.jsx)(s.td,{children:"13.8%"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Call Obfus enabled, Proxy Mode is Delegate"}),(0,t.jsx)(s.td,{children:"1001"}),(0,t.jsx)(s.td,{children:"43.4%"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Expr Obfus enabled"}),(0,t.jsx)(s.td,{children:"752"}),(0,t.jsx)(s.td,{children:"7.7%"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Eval Stack Obfus enabled, obfuscationPercentage=0.05"}),(0,t.jsx)(s.td,{children:"794"}),(0,t.jsx)(s.td,{children:"26.4%"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Eval Stack Obfus enabled, obfuscationPercentage=1.0"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"3672"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"426%"})})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Control Flow Obfus enabled"}),(0,t.jsx)(s.td,{children:"819"}),(0,t.jsx)(s.td,{children:"17.3%"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"All passes enabled except Eval Stack Obfus, Call Obfus Proxy Mode is dispatch"}),(0,t.jsx)(s.td,{children:"938"}),(0,t.jsx)(s.td,{children:"34.4%"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"All passes enabled, Call Obfus Proxy Mode is dispatch, Eval Stack Obfus obfuscationPercentage=0.05"}),(0,t.jsx)(s.td,{children:"1464"}),(0,t.jsx)(s.td,{children:"109%"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"All passes enabled, Call Obfus Proxy Mode is dispatch, Eval Stack Obfus obfuscationPercentage=0.5"}),(0,t.jsx)(s.td,{children:"2797"}),(0,t.jsx)(s.td,{children:"300%"})]})]})]}),"\n",(0,t.jsx)(s.p,{children:"Several notes:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"When all passes are disabled, the output assembly size is 17k smaller than when unobfuscated. We suspect this is due to different dll layout when re-exporting dll using dnlib compared to the original dll."}),"\n",(0,t.jsx)(s.li,{children:"Field Encryption has almost no impact on obfuscated file size because by default no fields are encrypted. Field encryption only takes effect when explicitly specified for certain fields in rule files."}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Eval Stack Obfus, Const Encryption, and Call Obfus (Delegate) passes have significant impact on final file size, while others have relatively small impact"}),"\n",(0,t.jsxs)(s.li,{children:["If Eval Stack Obfus obfuscationPercentage=1.0, it will ",(0,t.jsx)(s.strong,{children:"drastically"})," affect final dll size. Therefore, the global default value of obfuscationPercentage (i.e., the obfuscationPercentage value configured in global in rule files) ",(0,t.jsx)(s.strong,{children:"should not exceed 0.1"}),"."]}),"\n",(0,t.jsx)(s.li,{children:"Call Obfus choosing Proxy Mode as Dispatch generates significantly 30% smaller dll files compared to Delegate."}),"\n",(0,t.jsx)(s.li,{children:"Symbol Obfus can slightly reduce final dll size in most cases, as obfuscated names are generally shorter than original names."}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,s,l)=>{l.d(s,{R:()=>a,x:()=>d});var n=l(6540);const t={},i=n.createContext(t);function a(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);