"use strict";(self.webpackChunkobfuz=self.webpackChunkobfuz||[]).push([[2252],{6544:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>r,contentTitle:()=>i,default:()=>d,frontMatter:()=>c,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"manual/deobfuscate-stacktrace","title":"Deobfuscate Stack Trace","description":"After obfuscation, the function stack in logs output from code uses obfuscated names, which creates significant obstacles for tracking issues. Manually restoring the original stack by comparing the symbol mapping file (see Symbol Obfuscation documentation) that records the mapping relationship between original functions and obfuscated functions is very tedious. Obfuz provides the DeobfuscateStackTrace tool to automate the restoration of obfuscated stacks.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/manual/deobfuscate-stacktrace.md","sourceDirName":"manual","slug":"/manual/deobfuscate-stacktrace","permalink":"/en/docs/manual/deobfuscate-stacktrace","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/manual/deobfuscate-stacktrace.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Working with XLua","permalink":"/en/docs/manual/xlua/work-with-xlua"},"next":{"title":"\u5e2e\u52a9","permalink":"/en/docs/help"}}');var n=a(4848),s=a(8453);const c={},i="Deobfuscate Stack Trace",r={},l=[{value:"DeobfuscateStackTrace Tool",id:"deobfuscatestacktrace-tool",level:2},{value:"Command Line Parameters",id:"command-line-parameters",level:3},{value:"Usage",id:"usage",level:3},{value:"Remove Functions Generated by Obfuz",id:"remove-functions-generated-by-obfuz",level:3}];function u(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"deobfuscate-stack-trace",children:"Deobfuscate Stack Trace"})}),"\n",(0,n.jsxs)(t.p,{children:["After obfuscation, the function stack in logs output from code uses obfuscated names, which creates significant obstacles for tracking issues. Manually restoring the original stack by comparing the symbol mapping file (see ",(0,n.jsx)(t.a,{href:"./symbol-obfuscation",children:"Symbol Obfuscation"})," documentation) that records the mapping relationship between original functions and obfuscated functions is very tedious. Obfuz provides the ",(0,n.jsx)(t.code,{children:"DeobfuscateStackTrace"})," tool to automate the restoration of obfuscated stacks."]}),"\n",(0,n.jsx)(t.h2,{id:"deobfuscatestacktrace-tool",children:"DeobfuscateStackTrace Tool"}),"\n",(0,n.jsxs)(t.p,{children:["DeobfuscateStackTrace is a command-line tool developed based on ",(0,n.jsx)(t.code,{children:".NET 8"})," that can run on all .NET supported platforms including Windows, MacOS, Linux."]}),"\n",(0,n.jsxs)(t.p,{children:["The source code is in ",(0,n.jsx)(t.a,{href:"https://github.com/focus-creative-games/obfuz-tools/tree/main/DeobfuscateStackTrace",children:"DeobfuscateStackTrace-github"})," or ",(0,n.jsx)(t.a,{href:"https://gitee.com/focus-creative-games/obfuz-tools/tree/main/DeobfuscateStackTrace",children:"DeobfuscateStackTrace-gitee"})," in the repository root directory.\nYou can compile it yourself or download directly from github ",(0,n.jsx)(t.a,{href:"https://github.com/focus-creative-games/obfuz-tools/releases",children:"release"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"command-line-parameters",children:"Command Line Parameters"}),"\n",(0,n.jsx)(t.p,{children:"Command line parameters are described as follows:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-txt",children:"  -m, --mappingFile                     Required. mapping xml file\n\n  -i, --input                           Required. input obfuscated log file\n\n  -o, --output                          Required. output deobfuscated log file\n\n  -r, --removeMethodGeneratedByObfuz    Remove methods generated by obfuscator (e.g.\n                                        '$Obfuz$ProxyCall:$Obfuz$ProxyCall$Dispatch')\n\n  --help                                Display this help screen.\n\n  --version                             Display version information.\n"})}),"\n",(0,n.jsx)(t.h3,{id:"usage",children:"Usage"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"DeobfuscateStackTrace --help"})," to view help."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"DeobfuscateStackTrace -m {symbol mapping file} -i {obfuscated log} -o {deobfuscate log}"})," command restores obfuscated stack logs to original logs. The ",(0,n.jsx)(t.code,{children:"-m"})," parameter is the symbol mapping file pointed to by ",(0,n.jsx)(t.code,{children:"ObfuzSettings.SymbolObfusSettings.SymbolMappingFile"}),", ",(0,n.jsx)(t.code,{children:"-i"})," parameter is the obfuscated log file, ",(0,n.jsx)(t.code,{children:"-o"})," is the output deobfuscated log file."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Example:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Windows"}),"\n"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bat",children:"\nDeobfuscateStackTrace -m path/of/symbol-mapping.xml -i obfuscated.log -o deobfuscated.log\n\n"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"MacOS or Linux"}),"\n"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"dotnet DeobfuscateStackTrace.dll -m path/of/symbol-mapping.xml -i obfuscated.log -o deobfuscated.log\n\n"})}),"\n",(0,n.jsx)(t.h3,{id:"remove-functions-generated-by-obfuz",children:"Remove Functions Generated by Obfuz"}),"\n",(0,n.jsxs)(t.p,{children:["By default, the restored stack will include functions generated by Obfuz like ",(0,n.jsx)(t.code,{children:"$Obfuz$ProxyCall:$Obfuz$ProxyCall$Dispatch$35(Object, Object, Int32)"}),". If there are too many such function logs, they can sometimes affect readability.\nYou can specify ",(0,n.jsx)(t.code,{children:"-r"})," or ",(0,n.jsx)(t.code,{children:"--removeMethodGeneratedByObfuz"})," to remove stack information of such functions from the output stack log."]}),"\n",(0,n.jsx)(t.p,{children:"Using Windows command line as an example:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bat",children:"\nDeobfuscateStackTrace -m path/of/symbol-mapping.xml -i obfuscated.log -o deobfuscated.log -r\n\n"})}),"\n",(0,n.jsx)(t.p,{children:"This will restore the obfuscated stack log and remove all functions generated by Obfuz."})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},8453:(e,t,a)=>{a.d(t,{R:()=>c,x:()=>i});var o=a(6540);const n={},s=o.createContext(n);function c(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);